syntax = "proto3";

package chat;

option go_package = ".;pb";

import "google/protobuf/timestamp.proto";

service ChatService {
  rpc CreateRoom (CreateRoomRequest) returns (CreateRoomResponse);
  rpc JoinRoom (JoinRoomRequest) returns (JoinRoomResponse);
  rpc SendMessage (SendMessageRequest) returns (SendMessageResponse);
  rpc ListMessages (ListMessagesRequest) returns (ListMessagesResponse);
}

message CreateRoomRequest {
  string userID = 1;
  string name = 2;
}

message CreateRoomResponse {
  string roomID = 1;
  string invite_code = 2;
}

message JoinRoomRequest {
  string userID = 1;
  string invite_code = 2;
}

message JoinRoomResponse {}

message SendMessageRequest {
  string userID = 1;
  string roomID = 2;
  string content = 3;
}

message SendMessageResponse {}

message ListMessagesRequest {
  string userID = 1;
  string roomID = 2;
}

message Message {
  string messageID = 1;
  string senderID = 2;
  string content = 3;
  google.protobuf.Timestamp created_at = 4;
}

message ListMessagesResponse {
  repeated Message messages = 1;
}
